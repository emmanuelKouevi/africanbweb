{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport $ from 'jquery';\nimport { API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE, API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE, HEADERS } from '../globalConfig/globalConstConfig';\nimport { API_RESERVER_PROGRAMME_OFFRE } from '../globalConfig/globalConstConfig';\nexport default {\n  name: \"ReservationBillet\",\n  data() {\n    return {\n      successMsg: null,\n      errorMsg: null,\n      programmeReserved: {\n        data: {\n          programmeDesignation: \"Prog Abj-Dan\",\n          nombrePlace: 2,\n          categorieVoyageur: \"Adulte\",\n          gareDesignation: \"Gare de Marcory\",\n          isOtherPerson: true,\n          clientDetails: {\n            nom: \"Kouevi\",\n            prenoms: \"Ayite Emmanuel Herve\",\n            email: \"emmanuel herve\",\n            telephone: \"0565585746\"\n          },\n          offreVoyageDesignation: \"Abidjan - Danané\"\n        }\n      },\n      user: {\n        nom: null,\n        prenoms: null,\n        telephone: null\n      },\n      userCategory: null,\n      dialog: false,\n      overlay: false,\n      offreVoyage: {\n        id: null,\n        designation: null,\n        description: null,\n        compagnieTransportRaisonSociale: \"KOUEVI CT\",\n        typeOffreVoyageDesignation: null,\n        villeDepartDesignation: null,\n        villeDestinationDesignation: null\n      },\n      jourSemainesParOffreVoyagesList: [],\n      prixEtModeParOffreVoyageList: [],\n      offreVoyageObject: {\n        data: {\n          designation: null\n        }\n      },\n      jourVoyageSelected: null\n    };\n  },\n  methods: {\n    // FAIRE UNE RESERVATION POUR UN UTILISATEUR\n    async reserverOffre() {\n      this.dialog = false;\n      this.overlay = true;\n      this.programmeReserved.data.programmeDesignation = \"Prog Abj-Dan\";\n      this.programmeReserved.data.gareDesignation = \"Gare de Marcory\";\n      this.programmeReserved.data.categorieVoyageur = this.userCategory;\n      this.programmeReserved.data.offreVoyageDesignation = this.offreVoyage.designation;\n      await axios.post(API_RESERVER_PROGRAMME_OFFRE, this.programmeReserved, {\n        headers: HEADERS(this.$store.state.userAuthentified.token)\n      }).then(response => {\n        console.log(response);\n        if (response.status == 200) {\n          if (response.data.status.code == 800) {\n            this.successMsg = response.data.status.message;\n            $(\".alert-success\").fadeIn();\n            setTimeout(function () {\n              $(\".alert-success\").fadeOut();\n            }, 4000);\n            //this.objectContainList.datas = []\n          } else {\n            this.errorMsg = response.data.status.message;\n            $(\".alert-error\").fadeIn();\n            setTimeout(function () {\n              $(\".alert-error\").fadeOut();\n            }, 3000);\n            //this.objectContainList.datas = []\n          }\n        } else if (response.status == 204) {\n          this.warningMsg = \"Erreur , lors de la création\";\n          $(\".alert-warning\").fadeIn();\n          setTimeout(function () {\n            $(\".alert-warning\").fadeOut();\n          }, 3000);\n          //this.objectContainList.datas = []\n        } else {\n          this.errorMsg = \"Erreur , opération de création impossible\";\n          $(\".alert-error\").fadeIn();\n          setTimeout(function () {\n            $(\".alert-error\").fadeOut();\n          }, 3000);\n          //this.objectContainList.datas = []\n        }\n      }).catch(e => {\n        this.errorMsg = e;\n        $(\".alert-error\").fadeIn();\n        setTimeout(function () {\n          $(\".alert-error\").fadeOut();\n        }, 3000);\n        //this.objectContainList.datas = []\n      }).finally(() => {\n        this.overlay = false;\n      });\n    },\n    // PROCEDER A LA RESERVATION\n    chooseCategorieVoyageur() {\n      this.dialog = true;\n    },\n    async retrieveOffreSelected() {\n      if (localStorage.getItem(\"offreVoyageSelected\")) {\n        try {\n          const offreVoyageEditing = JSON.parse(localStorage.getItem(\"offreVoyageSelected\"));\n          this.offreVoyage.id = offreVoyageEditing.id;\n          this.offreVoyage.designation = offreVoyageEditing.designation;\n          this.offreVoyage.description = offreVoyageEditing.description;\n          this.offreVoyage.typeOffreVoyageDesignation = offreVoyageEditing.typeOffreVoyageDesignation;\n          this.offreVoyage.villeDepartDesignation = offreVoyageEditing.villeDepartDesignation;\n          this.offreVoyage.villeDestinationDesignation = offreVoyageEditing.villeDestinationDesignation;\n          this.offreVoyageObject.data.designation = this.offreVoyage.designation;\n          await axios.post(API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE, this.offreVoyageObject, {\n            headers: HEADERS(this.$store.state.userAuthentified.token)\n          }).then(response => {\n            if (response.data.status.code == 800) {\n              this.jourSemainesParOffreVoyagesList = response.data.items;\n              console.log(this.jourSemainesParOffreVoyagesList);\n            } else {\n              this.jourSemainesParOffreVoyagesList = [];\n            }\n          }).catch(e => {\n            this.errorMsg = e;\n            $(\".alert-error\").fadeIn();\n            setTimeout(function () {\n              $(\".alert-error\").fadeOut();\n            }, 4000);\n          });\n          await axios.post(API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE, this.offreVoyageObject, {\n            headers: HEADERS(this.$store.state.userAuthentified.token)\n          }).then(response => {\n            if (response.data.status.code == 800) {\n              this.prixEtModeParOffreVoyageList = response.data.items;\n            } else {\n              this.prixEtModeParOffreVoyageList = [];\n            }\n          }).catch(e => {\n            this.errorMsg = e;\n            $(\".alert-error\").fadeIn();\n            setTimeout(function () {\n              $(\".alert-error\").fadeOut();\n            }, 4000);\n          });\n          //localStorage.removeItem(\"offreVoyage\");\n        } catch (error) {\n          localStorage.removeItem(\"offreVoyage\");\n        }\n      }\n    }\n  },\n  computed: {\n    getProgrammeFromDaySelected() {\n      let programmeDTOList = [];\n      this.jourSemainesParOffreVoyagesList.forEach(element => {\n        if (this.jourVoyageSelected == element.jourSemaineDesignation) {\n          if (element.programmeDTOList != null || element.programmeDTOList != undefined) {\n            element.programmeDTOList.forEach(item => {\n              programmeDTOList.push(item);\n            });\n          }\n        }\n      });\n      return programmeDTOList;\n    },\n    getModeByOffre() {\n      let mode;\n      this.prixEtModeParOffreVoyageList.forEach(element => {\n        if (this.userCategory == element.categorieVoyageurDesignation) {\n          mode = element.modeDesignation;\n        }\n      });\n      return mode;\n    },\n    getPrixByOffre() {\n      let price;\n      this.prixEtModeParOffreVoyageList.forEach(element => {\n        if (this.userCategory == element.categorieVoyageurDesignation) {\n          price = element.prix;\n        }\n      });\n      return price;\n    }\n  },\n  mounted() {\n    this.retrieveOffreSelected();\n  }\n};","map":{"version":3,"mappings":";AAyQA;AACA;AACA;AACA;AACA;EACAA;EACAC;IACA;MACAC;MACAC;MAGAC;QACAH;UACAI;UACAC;UACAC;UACAC;UACAC;UACAC;YACAC;YACAC;YACAC;YACAC;UACA;UACAC;QACA;MACA;MAEAC;QACAL;QACAC;QACAE;MACA;MAEAG;MAEAC;MACAC;MAEAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MAIAC;MACAC;MAEAC;QACA7B;UACAqB;QACA;MACA;MAEAS;IAEA;EACA;EAEAC;IAEA;IACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;QAAAC;MAAA;QACAC;QACA;UACA;YACA;YACAC;YACAC;cACAD;YACA;YACA;UACA;YACA;YACAA;YACAC;cACAD;YACA;YACA;UACA;QAEA,OACA;UACA;UACAA;UACAC;YACAD;UACA;UACA;QACA,OACA;UACA;UACAA;UACAC;YACAD;UACA;UACA;QACA;MACA;QACA;QACAA;QACAC;UACAD;QACA;QACA;MACA;QACA;MACA;IACA;IAEA;IACAE;MACA;IACA;IAEA;MACA;QACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;YAAAJ;UAAA;YACA;cACA;cACAC;YACA;cACA;YACA;UACA;YACA;YACAC;YACAC;cACAD;YACA;UACA;UAEA;YAAAF;UAAA;YACA;cACA;YACA;cACA;YACA;UACA;YACA;YACAE;YACAC;cACAD;YACA;UACA;UACA;QACA;UACAG;QACA;MACA;IACA;EACA;EAEAC;IAEAC;MACA;MACA;QACA;UACA;YACAC;cACAC;YACA;UACA;QAEA;MACA;MACA;IACA;IAEAC;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;IACA;IAEAC;MACA;MACA;QACA;UACAC;QACA;MACA;MACA;IACA;EAGA;EAEAC;IACA;EACA;AACA","names":["name","data","successMsg","errorMsg","programmeReserved","programmeDesignation","nombrePlace","categorieVoyageur","gareDesignation","isOtherPerson","clientDetails","nom","prenoms","email","telephone","offreVoyageDesignation","user","userCategory","dialog","overlay","offreVoyage","id","designation","description","compagnieTransportRaisonSociale","typeOffreVoyageDesignation","villeDepartDesignation","villeDestinationDesignation","jourSemainesParOffreVoyagesList","prixEtModeParOffreVoyageList","offreVoyageObject","jourVoyageSelected","methods","headers","console","$","setTimeout","chooseCategorieVoyageur","localStorage","computed","getProgrammeFromDaySelected","element","programmeDTOList","getModeByOffre","mode","getPrixByOffre","price","mounted"],"sourceRoot":"src/components/vendeur","sources":["ReservationBillet.vue"],"sourcesContent":["<template>\n    <v-app>\n        <div class=\"relative flex flex-col bg-clip-border rounded-xl bg-white text-gray-700 h-[calc(100vh-2rem)] w-full max-w-[20rem] p-4 shadow-xl shadow-blue-gray-900/5\">\n  <div class=\"mb-2 p-4\">\n    <h5 class=\"block antialiased tracking-normal font-sans text-xl font-semibold leading-snug text-gray-900\">Material Tailwind</h5>\n  </div>\n  <nav class=\"flex flex-col gap-1 min-w-[240px] p-2 font-sans text-base font-normal text-gray-700\">\n    <div role=\"button\" tabindex=\"0\" class=\"flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-blue-50 hover:bg-opacity-80 focus:bg-blue-50 focus:bg-opacity-80 active:bg-gray-50 active:bg-opacity-80 hover:text-blue-900 focus:text-blue-900 active:text-blue-900 outline-none\">\n      <div class=\"grid place-items-center mr-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"h-5 w-5\">\n          <path fill-rule=\"evenodd\" d=\"M2.25 2.25a.75.75 0 000 1.5H3v10.5a3 3 0 003 3h1.21l-1.172 3.513a.75.75 0 001.424.474l.329-.987h8.418l.33.987a.75.75 0 001.422-.474l-1.17-3.513H18a3 3 0 003-3V3.75h.75a.75.75 0 000-1.5H2.25zm6.04 16.5l.5-1.5h6.42l.5 1.5H8.29zm7.46-12a.75.75 0 00-1.5 0v6a.75.75 0 001.5 0v-6zm-3 2.25a.75.75 0 00-1.5 0v3.75a.75.75 0 001.5 0V9zm-3 2.25a.75.75 0 00-1.5 0v1.5a.75.75 0 001.5 0v-1.5z\" clip-rule=\"evenodd\"></path>\n        </svg>\n      </div>\n      Blocks\n    </div>\n    <div role=\"button\" tabindex=\"0\" class=\"flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-blue-50 hover:bg-opacity-80 focus:bg-blue-50 focus:bg-opacity-80 active:bg-blue-50 active:bg-opacity-80 hover:text-blue-900 focus:text-blue-900 active:text-blue-900 outline-none\">\n      <div class=\"grid place-items-center mr-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"h-5 w-5\">\n          <path fill-rule=\"evenodd\" d=\"M7.5 6v.75H5.513c-.96 0-1.764.724-1.865 1.679l-1.263 12A1.875 1.875 0 004.25 22.5h15.5a1.875 1.875 0 001.865-2.071l-1.263-12a1.875 1.875 0 00-1.865-1.679H16.5V6a4.5 4.5 0 10-9 0zM12 3a3 3 0 00-3 3v.75h6V6a3 3 0 00-3-3zm-3 8.25a3 3 0 106 0v-.75a.75.75 0 011.5 0v.75a4.5 4.5 0 11-9 0v-.75a.75.75 0 011.5 0v.75z\" clip-rule=\"evenodd\"></path>\n        </svg>\n      </div>Books\n    </div>\n    <div role=\"button\" tabindex=\"0\" class=\"flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-blue-50 hover:bg-opacity-80 focus:bg-blue-50 focus:bg-opacity-80 active:bg-blue-50 active:bg-opacity-80 hover:text-blue-900 focus:text-blue-900 active:text-blue-900 outline-none\">\n      <div class=\"grid place-items-center mr-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"h-5 w-5\">\n          <path fill-rule=\"evenodd\" d=\"M6.912 3a3 3 0 00-2.868 2.118l-2.411 7.838a3 3 0 00-.133.882V18a3 3 0 003 3h15a3 3 0 003-3v-4.162c0-.299-.045-.596-.133-.882l-2.412-7.838A3 3 0 0017.088 3H6.912zm13.823 9.75l-2.213-7.191A1.5 1.5 0 0017.088 4.5H6.912a1.5 1.5 0 00-1.434 1.059L3.265 12.75H6.11a3 3 0 012.684 1.658l.256.513a1.5 1.5 0 001.342.829h3.218a1.5 1.5 0 001.342-.83l.256-.512a3 3 0 012.684-1.658h2.844z\" clip-rule=\"evenodd\"></path>\n        </svg>\n      </div>Example Pages <div class=\"grid place-items-center ml-auto justify-self-end\">\n        <div class=\"relative grid items-center font-sans font-bold uppercase whitespace-nowrap select-none bg-blue-500/20 text-blue-900 py-1 px-2 text-xs rounded-full\" style=\"opacity: 1;\">\n          <span class=\"\">14</span>\n        </div>\n      </div>\n    </div>\n    <div role=\"button\" tabindex=\"0\" class=\"flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-blue-50 hover:bg-opacity-80 focus:bg-blue-50 focus:bg-opacity-80 active:bg-blue-50 active:bg-opacity-80 hover:text-blue-900 focus:text-blue-900 active:text-blue-900 outline-none\">\n      <div class=\"grid place-items-center mr-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"h-5 w-5\">\n          <path fill-rule=\"evenodd\" d=\"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z\" clip-rule=\"evenodd\"></path>\n        </svg>\n      </div>Profile\n    </div>\n    <div role=\"button\" tabindex=\"0\" class=\"flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-blue-50 hover:bg-opacity-80 focus:bg-blue-50 focus:bg-opacity-80 active:bg-blue-50 active:bg-opacity-80 hover:text-blue-900 focus:text-blue-900 active:text-blue-900 outline-none\">\n      <div class=\"grid place-items-center mr-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"h-5 w-5\">\n          <path fill-rule=\"evenodd\" d=\"M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.923-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z\" clip-rule=\"evenodd\"></path>\n        </svg>\n      </div>Settings\n    </div>\n    <div role=\"button\" tabindex=\"0\" class=\"flex items-center w-full p-3 rounded-lg text-start leading-tight transition-all hover:bg-blue-50 hover:bg-opacity-80 focus:bg-blue-50 focus:bg-opacity-80 active:bg-blue-50 active:bg-opacity-80 hover:text-blue-900 focus:text-blue-900 active:text-blue-900 outline-none\">\n      <div class=\"grid place-items-center mr-4\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"currentColor\" aria-hidden=\"true\" class=\"h-5 w-5\">\n          <path fill-rule=\"evenodd\" d=\"M12 2.25a.75.75 0 01.75.75v9a.75.75 0 01-1.5 0V3a.75.75 0 01.75-.75zM6.166 5.106a.75.75 0 010 1.06 8.25 8.25 0 1011.668 0 .75.75 0 111.06-1.06c3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788a.75.75 0 011.06 0z\" clip-rule=\"evenodd\"></path>\n        </svg>\n      </div>Log Out\n    </div>\n  </nav>\n</div>\n\n<div class=\"w-full pt-5 px-4 mb-8 mx-auto \">\n    <div class=\"text-sm text-gray-700 py-1\">\n        Made with <a class=\"text-gray-700 font-semibold\" href=\"https://www.material-tailwind.com/docs/react/sidebar?ref=tailwindcomponents\" target=\"_blank\">Material Tailwind</a> by <a href=\"https://www.creative-tim.com?ref=tailwindcomponents\" class=\"text-gray-700 font-semibold\" target=\"_blank\"> Creative Tim</a>.\n    </div>\n</div>\n        <v-container fluid>\n            <v-sheet color=\"#b2bec3\">\n                <v-container>\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"title-card\">DÉTAIL SUR L'OFFRE:</span></v-card-title>\n                        <v-card-text>\n                            <div class=\"row\">\n                                <div class=\"col-sm-6\">\n                                    <v-container>\n                                        <v-card>\n                                            <v-card-title><span class=\"designation-offre\">{{ offreVoyage.designation }}</span></v-card-title>\n                                            <v-card-text>\n                                                <v-container>\n                                                    <v-row>\n                                                        <span>Type de l'offre :</span>&nbsp;&nbsp;\n                                                        <span>{{ offreVoyage.typeOffreVoyageDesignation }}</span>\n                                                    </v-row><br><br>\n                                                    <v-row>\n                                                        <v-icon dense color=\"teal\">mdi-circle</v-icon>&nbsp;&nbsp; Gare départ : <span class=\"gareDepart\">{{ offreVoyage.villeDepartDesignation }}</span>  \n                                                    </v-row><br><br>\n                                                    <v-row>\n                                                        <v-icon dense color=\"#2C3A47\">mdi-circle</v-icon>&nbsp;&nbsp; Gare destination : <span class=\"gareDestination\">{{ offreVoyage.villeDestinationDesignation }} </span>  \n                                                    </v-row>        \n                                                </v-container>\n                                            </v-card-text>\n                                        </v-card>\n                                    </v-container>\n                                </div>\n\n                                <div class=\"col-sm-6\">\n                                    <v-container>\n                                        <v-card>\n                                            <v-card-text>\n                                                <v-container>\n                                                    <div class=\"form-group\">\n                                                        <label>Choisissez le jour du voyage:</label>\n                                                        <v-select :items=\"jourSemainesParOffreVoyagesList\" item-text=\"jourSemaineDesignation\" item-value=\"jourSemaineDesignation\" v-model=\"jourVoyageSelected\" dense outlined></v-select>\n                                                    </div>\n\n                                                    <div class=\"form-group\" v-if=\"jourVoyageSelected\">\n                                                        <label>Choisissez l'heure de départ:</label>\n                                                        <v-select :items=\"getProgrammeFromDaySelected\" item-text=\"heureDepart\" dense outlined></v-select>\n                                                    </div>\n                                                </v-container>\n                                            </v-card-text>\n                                        </v-card>\n                                    </v-container>\n                                </div>\n                            </div>\n                            <v-divider></v-divider>\n                            <div class=\"row\">\n                                <div class=\"col-sm-6\" v-for=\"(mode,index) in prixEtModeParOffreVoyageList\" :key=\"index\">\n                                    <v-card>\n                                        <v-card-title>Mode n°{{ index + 1}}</v-card-title>\n                                        <v-card-text>\n                                            <v-container>\n                                                <v-row>\n                                                    <v-col><small class=\"muted-text\">Mode de l'offre :</small></v-col>\n                                                    <v-col><span class=\"label-text font-weight-bold\">{{ mode.modeDesignation }}</span></v-col>\n                                                </v-row>\n\n                                                <v-row>\n                                                    <v-col><small class=\"muted-text\">Catégorie :</small></v-col>\n                                                    <v-col><span class=\"label-text font-weight-bold\">{{ mode.categorieVoyageurDesignation }}</span></v-col>\n                                                </v-row>\n                                                <v-row>\n                                                    <v-col><small class=\"muted-text\">Prix de l'offre :</small></v-col>\n                                                    <v-col><span class=\"label-text font-weight-bold\">{{ mode.prix }} FCFA</span></v-col>\n                                                </v-row>\n                                            </v-container>\n                                        </v-card-text>\n                                    </v-card>\n                                </div>\n                            </div>\n                        </v-card-text>\n                    </v-card><br>\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"title-card\">INFORMATION DU CLIENT:</span></v-card-title>\n                        <v-card-text>\n                            <form>\n                                <div class=\"form-row\">\n                                    <div class=\"form-group col-md-6\">\n                                        <label for=\"inputEmail4\">Nom:</label>\n                                        <input type=\"text\" v-model=\"user.nom\" class=\"form-control\" id=\"inputEmail4\">\n                                    </div>\n                                    <div class=\"form-group col-md-6\">\n                                        <label for=\"inputPassword4\">Prenoms:</label>\n                                        <input type=\"text\" class=\"form-control\" id=\"inputPassword4\" v-model=\"user.prenoms\">\n                                    </div>\n                                </div>\n                                <div class=\"form-row\">\n                                    <div class=\"form-group col-md-6\">\n                                        <label for=\"inputEmail4\">Numero de téléphone:</label>\n                                        <input type=\"text\" class=\"form-control\" v-model=\"user.telephone\" id=\"inputEmail4\">\n                                    </div>\n                                </div>\n                            </form>\n                        </v-card-text>\n                    </v-card><br>\n\n                    <v-card elevation=\"5\">\n                        <v-card-title><span class=\"title-card\">CHOIX DU MODE DE PAIEMENT:</span></v-card-title>\n                        <v-card-text>\n                            <v-container>\n                                <v-radio-group row>\n                                    <v-radio label=\"En espèces\" value=\"radio-1\"></v-radio>\n                                </v-radio-group>\n                            </v-container>\n                        </v-card-text>\n                    </v-card><br>\n                </v-container>  \n                <v-card-actions>\n                    <v-btn x-small color=\"secondary\">RETOUR</v-btn>\n                    <v-btn x-small color=\"teal\" @click=\"chooseCategorieVoyageur\"><span class=\"btn-title\">RESERVER POUR CE TRAJET</span></v-btn>\n                </v-card-actions>         \n            </v-sheet>\n        </v-container>\n\n        <v-dialog v-model=\"dialog\">\n            <v-sheet>\n                <v-toolbar>\n                    <v-toolbar-title><span class=\"font-weight-bold\">CONFIRMATION DE RESERVATION</span></v-toolbar-title>\n                </v-toolbar><br>\n                <v-card>\n                    <v-card-text>\n                        <v-container>\n                            <v-card>\n                                <v-card-title><span class=\"designation-offre\">{{ offreVoyage.designation }}</span></v-card-title>\n                                <v-card-text>\n                                    <v-container>\n                                        <v-row>\n                                            <span>Type de l'offre :</span>&nbsp;&nbsp;\n                                            <span>{{ offreVoyage.typeOffreVoyageDesignation }}</span>\n                                        </v-row><br><br>\n                                        <v-row>\n                                            <v-icon dense color=\"teal\">mdi-circle</v-icon>&nbsp;&nbsp; Gare départ : <span class=\"gareDepart\">{{ offreVoyage.villeDepartDesignation }}</span>  \n                                        </v-row><br><br>\n                                        <v-row>\n                                            <v-icon dense color=\"#2C3A47\">mdi-circle</v-icon>&nbsp;&nbsp; Gare destination : <span class=\"gareDestination\">{{ offreVoyage.villeDestinationDesignation }} </span>  \n                                        </v-row>        \n                                    </v-container>\n                                    <v-divider></v-divider>\n                                </v-card-text>\n                            </v-card>\n                            <v-divider></v-divider>\n                            <v-card>\n                                <v-card-title><span class=\"designation-offre\">Information du client</span></v-card-title>\n                                <v-card-text>\n                                    <v-container>\n                                        <v-row>\n                                            <span>Nom:</span>&nbsp;&nbsp;\n                                            <span>{{ user.nom }}</span>\n                                        </v-row><br><br>\n                                        <v-row>\n                                            <span>Prenoms:</span>&nbsp;&nbsp;\n                                            <span>{{ user.prenoms }}</span>\n                                        </v-row><br><br>\n                                        <v-row>\n                                            <span>Contact:</span>&nbsp;&nbsp;\n                                            <span>{{ user.telephone }}</span>\n                                        </v-row>      \n                                    </v-container>\n                                    <v-divider></v-divider>\n                                </v-card-text>\n                            </v-card>\n                            <v-divider></v-divider>\n                            <v-card>\n                                <v-card-title><span class=\"designation-offre\">Catégorie du client</span></v-card-title>\n                                <v-card-text>\n                                    <v-container>\n                                        <div class=\"form-group\">\n                                            <label>Selectionnez la categorie:</label>\n                                            <v-select class=\"col-sm-6\" :items=\"prixEtModeParOffreVoyageList\" item-text=\"categorieVoyageurDesignation\" item-value=\"categorieVoyageurDesignation\" v-model=\"userCategory\" dense outlined></v-select>\n                                        </div>\n                                        <div>\n                                            <span class=\"font-weight-bold\">Mode :</span> <span class=\"data-label\">{{ getModeByOffre }}</span><br><br>\n                                        </div>\n                                        <div>\n                                            <span class=\"font-weight-bold\">Montant à payer :</span> <span class=\"data-label font-weight-bold\">{{ getPrixByOffre }}</span> FCFA\n                                        </div>\n                                              \n                                    </v-container>\n                                    <v-divider></v-divider>\n                                </v-card-text>\n                            </v-card>\n                        </v-container>\n                    </v-card-text>  \n                    <v-card-actions>\n                        <v-btn x-small color=\"secondary\">Annuler</v-btn>\n                        <v-btn x-small color=\"success\" @click=\"reserverOffre()\">confirmer</v-btn>\n                    </v-card-actions>             \n                </v-card>\n            </v-sheet>\n                                \n            <v-divider vertical></v-divider>\n        </v-dialog>\n        <v-alert class=\"myalert alert-success\" type=\"success\" width=\"350px\" dismissible>{{ successMsg }}</v-alert> \n        <v-alert class=\"myalert alert-error\" type=\"error\" width=\"350px\" dismissible>{{ errorMsg }}</v-alert>\n        <v-overlay :value=\"overlay\"><v-progress-circular indeterminate size=\"64\"></v-progress-circular></v-overlay>\n    </v-app>\n</template>\n\n<script>\nimport axios from \"axios\"\nimport $ from 'jquery'\nimport { API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE , API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE , HEADERS } from '../globalConfig/globalConstConfig'\nimport { API_RESERVER_PROGRAMME_OFFRE } from '../globalConfig/globalConstConfig'\nexport default {\n    name:\"ReservationBillet\",\n    data(){\n        return{\n            successMsg : null,\n            errorMsg : null,\n\n\n            programmeReserved:{\n                data:{\n                    programmeDesignation : \"Prog Abj-Dan\",\n                    nombrePlace : 2,\n                    categorieVoyageur: \"Adulte\",\n                    gareDesignation : \"Gare de Marcory\",\n                    isOtherPerson:true,\n                    clientDetails:{\n                        nom: \"Kouevi\",\n                        prenoms: \"Ayite Emmanuel Herve\",\n                        email: \"emmanuel herve\",\n                        telephone:\"0565585746\"\n                    },\n                    offreVoyageDesignation:\"Abidjan - Danané\",\n                }\n            },\n\n            user:{\n                nom : null,\n                prenoms : null,\n                telephone : null\n            },\n\n            userCategory : null,\n\n            dialog:false,\n            overlay: false,\n\n            offreVoyage:{\n                id:null,\n                designation : null ,\n                description: null,\n                compagnieTransportRaisonSociale : \"KOUEVI CT\",\n                typeOffreVoyageDesignation : null,\n                villeDepartDesignation : null,\n                villeDestinationDesignation : null\n            },\n    \n            \n\n            jourSemainesParOffreVoyagesList : [],\n            prixEtModeParOffreVoyageList:[],\n\n            offreVoyageObject:{\n                data:{\n                    designation:null\n                }\n            },\n\n            jourVoyageSelected: null\n\n        }\n    },\n\n    methods:{\n\n        // FAIRE UNE RESERVATION POUR UN UTILISATEUR\n        async reserverOffre(){\n            this.dialog = false;\n            this.overlay = true;\n            this.programmeReserved.data.programmeDesignation = \"Prog Abj-Dan\"\n            this.programmeReserved.data.gareDesignation = \"Gare de Marcory\"\n            this.programmeReserved.data.categorieVoyageur = this.userCategory\n            this.programmeReserved.data.offreVoyageDesignation = this.offreVoyage.designation\n            await axios.post(API_RESERVER_PROGRAMME_OFFRE, this.programmeReserved, { headers : HEADERS(this.$store.state.userAuthentified.token) }).then((response) => {\n                console.log(response)\n                if (response.status == 200) {\n                    if (response.data.status.code == 800) {\n                        this.successMsg = response.data.status.message\n                        $(\".alert-success\").fadeIn();\n                        setTimeout(function(){\n                            $(\".alert-success\").fadeOut(); \n                        }, 4000)\n                        //this.objectContainList.datas = []\n                    }else{\n                        this.errorMsg = response.data.status.message\n                        $(\".alert-error\").fadeIn();\n                        setTimeout(function(){\n                            $(\".alert-error\").fadeOut(); \n                        }, 3000)\n                        //this.objectContainList.datas = []\n                    }  \n                    \n                }\n                else if (response.status == 204) {\n                    this.warningMsg = \"Erreur , lors de la création\";\n                    $(\".alert-warning\").fadeIn();\n                    setTimeout(function(){\n                        $(\".alert-warning\").fadeOut(); \n                    }, 3000)\n                    //this.objectContainList.datas = []\n                }\n                else{\n                    this.errorMsg = \"Erreur , opération de création impossible\";\n                    $(\".alert-error\").fadeIn();\n                    setTimeout(function(){\n                        $(\".alert-error\").fadeOut(); \n                    }, 3000)\n                    //this.objectContainList.datas = []\n                }\n            }).catch((e) => {\n                this.errorMsg = e;\n                $(\".alert-error\").fadeIn();\n                setTimeout(function(){\n                    $(\".alert-error\").fadeOut(); \n                }, 3000)\n                //this.objectContainList.datas = []\n            }).finally(() => {\n                this.overlay = false;\n            })\n        },\n        \n        // PROCEDER A LA RESERVATION\n        chooseCategorieVoyageur(){\n            this.dialog = true\n        },\n\n        async retrieveOffreSelected(){\n            if (localStorage.getItem(\"offreVoyageSelected\")) {\n                try {\n                    const offreVoyageEditing = JSON.parse(localStorage.getItem(\"offreVoyageSelected\"));\n                    this.offreVoyage.id = offreVoyageEditing.id;\n                    this.offreVoyage.designation = offreVoyageEditing.designation;\n                    this.offreVoyage.description = offreVoyageEditing.description;\n                    this.offreVoyage.typeOffreVoyageDesignation = offreVoyageEditing.typeOffreVoyageDesignation;\n                    this.offreVoyage.villeDepartDesignation = offreVoyageEditing.villeDepartDesignation;\n                    this.offreVoyage.villeDestinationDesignation = offreVoyageEditing.villeDestinationDesignation;\n                    this.offreVoyageObject.data.designation = this.offreVoyage.designation;\n                    await axios.post(API_OBENIR_JOUR_SEMAINE_PAR_OFFRE_VOYAGE , this.offreVoyageObject , { headers : HEADERS(this.$store.state.userAuthentified.token) }).then((response) => {\n                        if (response.data.status.code == 800) {\n                            this.jourSemainesParOffreVoyagesList = response.data.items\n                            console.log(this.jourSemainesParOffreVoyagesList)\n                        }else{\n                            this.jourSemainesParOffreVoyagesList = [];\n                        }\n                    }).catch((e) => {\n                        this.errorMsg = e ;\n                        $(\".alert-error\").fadeIn();\n                        setTimeout(function(){\n                            $(\".alert-error\").fadeOut(); \n                        }, 4000)\n                    })\n\n                    await axios.post(API_RECUPERER_PRIX_PAR_OFFRE_VOYAGE, this.offreVoyageObject , { headers : HEADERS(this.$store.state.userAuthentified.token) }).then((response) => {\n                        if (response.data.status.code == 800) {\n                            this.prixEtModeParOffreVoyageList = response.data.items\n                        }else{\n                            this.prixEtModeParOffreVoyageList = [];\n                        }\n                    }).catch((e) => {\n                        this.errorMsg = e ;\n                        $(\".alert-error\").fadeIn();\n                        setTimeout(function(){\n                            $(\".alert-error\").fadeOut(); \n                        }, 4000)\n                    })\n                    //localStorage.removeItem(\"offreVoyage\");\n                } catch (error) {\n                    localStorage.removeItem(\"offreVoyage\");\n                }\n            }\n        },\n    },\n\n    computed:{\n        \n        getProgrammeFromDaySelected(){\n            let programmeDTOList = [];\n            this.jourSemainesParOffreVoyagesList.forEach(element => {\n                if (this.jourVoyageSelected == element.jourSemaineDesignation) {\n                    if(element.programmeDTOList != null || element.programmeDTOList != undefined){\n                        element.programmeDTOList.forEach(item => {\n                            programmeDTOList.push(item)\n                        });\n                    }\n                    \n                }\n            });\n            return programmeDTOList\n        },\n\n        getModeByOffre(){\n            let mode ;\n            this.prixEtModeParOffreVoyageList.forEach(element => {\n                if (this.userCategory == element.categorieVoyageurDesignation) {\n                    mode = element.modeDesignation\n                }\n            });\n            return mode;\n        },\n\n        getPrixByOffre(){\n            let price ;\n            this.prixEtModeParOffreVoyageList.forEach(element => {\n                if (this.userCategory == element.categorieVoyageurDesignation) {\n                    price = element.prix\n                }\n            });\n            return price;\n        },\n\n\n    },\n\n    mounted(){\n        this.retrieveOffreSelected();\n    }\n}\n</script>\n\n<style scoped>\n    .title-card{\n        font-weight: bold;\n        font-size: 12px;\n    }\n\n    .designation-offre{\n        font-weight: 700;\n        color: #303952;\n    }\n\n    .btn-title{\n        color: white;\n    }\n\n    .gareDepart{\n        font-size: 15px;\n        color: teal;\n        font-weight: bold;\n    }\n\n    .gareDestination{\n        font-size: 15px;\n        color: #2C3A47;\n        font-weight: bold;\n    }\n\n    .data-label{\n        color: #2c3e50;\n    }\n\n    .myalert{\n        display: none;\n        z-index: 1900;\n    }\n\n    .alert-success{\n        position: fixed;\n        top: 25px;\n        right:2%;\n        width: 25%;\n    }\n\n    .alert-error{\n        position: fixed;\n        top: 25px;\n        right:2%;\n        width: 25%;\n    }\n</style>"]},"metadata":{},"sourceType":"module"}