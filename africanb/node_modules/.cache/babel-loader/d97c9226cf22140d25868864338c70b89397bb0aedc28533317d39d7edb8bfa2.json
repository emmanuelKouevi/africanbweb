{"ast":null,"code":"import { API_GENERATE_TICKET, HEADERS } from '../globalConfig/globalConstConfig';\nimport axios from 'axios';\nexport default {\n  name: \"ReservationDetail\",\n  data() {\n    return {\n      reservationItem: {\n        id: null,\n        clientDetails: {\n          nom: null,\n          prenoms: null,\n          email: null\n        },\n        designation: null,\n        gareDesignation: null,\n        montantTotalReservation: null,\n        nombrePlace: null,\n        statusActualDesignation: null\n      },\n      ticketGenerated: {\n        data: {\n          designation: null\n        }\n      }\n    };\n  },\n  methods: {\n    async editingBooking() {\n      if (localStorage.getItem(\"reservationBillet\")) {\n        try {\n          const booking = JSON.parse(localStorage.getItem(\"reservationBillet\"));\n          this.reservationItem = booking;\n          console.log(this.reservationItem);\n          localStorage.removeItem(\"reservationBillet\");\n        } catch (error) {\n          localStorage.removeItem(\"reservationBillet\");\n        }\n      } else {\n        this.$router.replace({\n          path: '/selectionnerReservationBillet'\n        });\n      }\n    },\n    async convertToBase64(byte) {\n      window.open(\"data:application/pdf;base64,\" + byte, '_blank', 'fullscreen=yes');\n    },\n    //Generer le billet de voyage\n    async imprimerBillet(designationBillet) {\n      this.ticketGenerated.data.designation = designationBillet;\n      await axios.post(API_GENERATE_TICKET, this.ticketGenerated, {\n        headers: HEADERS(this.$store.state.userAuthentified.token)\n      }).then(response => {\n        if (designationBillet == null) {\n          this.$swal.fire('Erreur', 'Impossible d\\'imprimer ce billet', 'error');\n        } else {\n          this.convertToBase64(response.data.item.contentBase64);\n        }\n      }).catch(e => {\n        this.errorMsg = e;\n      });\n    }\n  },\n  mounted() {\n    this.editingBooking();\n  }\n};","map":{"version":3,"names":["API_GENERATE_TICKET","HEADERS","axios","name","data","reservationItem","id","clientDetails","nom","prenoms","email","designation","gareDesignation","montantTotalReservation","nombrePlace","statusActualDesignation","ticketGenerated","methods","editingBooking","localStorage","getItem","booking","JSON","parse","console","log","removeItem","error","$router","replace","path","convertToBase64","byte","window","open","imprimerBillet","designationBillet","post","headers","$store","state","userAuthentified","token","then","response","$swal","fire","item","contentBase64","catch","e","errorMsg","mounted"],"sources":["src/components/vendeur/DetailReservation.vue"],"sourcesContent":["<template>\n\n    <v-app id=\"page\"><br>\n\n        <v-container class=\"jumbotron\">\n\n            <div class=\"row justify-between\">\n                <div class=\"col-lg-6\">\n                    <span class=\"font-weight-bold\">Détail du billet de réservation</span>\n                </div>\n\n                <div class=\"col-lg-6\">\n                    <v-btn x-small text color=\"primary\" @click=\"$router.replace({path:'/selectionnerReservationBillet'})\">Faire une nouvelle réservation</v-btn>\n                </div>\n            </div>\n\n            <v-divider></v-divider>\n\n            <div class=\"row\">\n\n                <div class=\"col-lg-12\">\n\n                    <v-card>\n\n                        <v-card-title><span>Réservation Reférence n° {{ reservationItem.id }}</span></v-card-title>\n\n                        <v-divider></v-divider>\n\n                        <v-card-text>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Gare de voyage :</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">{{ reservationItem.gareDesignation }}</span>\n                                </div>\n\n                            </div>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Réservation crée le:</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">24-06-2024</span>\n                                </div>\n\n                            </div>\n\n                            <v-divider></v-divider>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Nom et Prénoms du client:</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">{{ reservationItem.clientDetails.nom }} {{ reservationItem.clientDetails.prenoms }}</span>\n                                </div>\n\n                            </div>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Address E-mail:</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">{{ reservationItem.clientDetails.email }}</span>\n                                </div>\n\n                            </div>\n\n                            <v-divider></v-divider>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Offre de voyage:</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">{{ reservationItem.offreVoyageDesignation }}</span>\n                                </div>\n\n                            </div>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Nombre de place réservé(s):</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">{{ reservationItem.nombrePlace }}</span>\n                                </div>\n\n                            </div>\n\n                            <div class=\"row\">\n\n                                <div class=\"col-lg-6\">\n                                    <span>Montant de la réservation:</span>\n                                </div>\n\n                                <div class=\"col-lg-6\">\n                                    <span class=\"font-weight-bold\">{{ reservationItem.montantTotalReservation}} FCFA</span>\n                                </div>\n\n                            </div>\n\n                        </v-card-text><br>\n\n                        <v-card-actions class=\"float-right\">\n                            <v-btn x-small color=\"success\" @click=\"imprimerBillet(reservationItem.designation)\">Imprimer le billet</v-btn>\n                        </v-card-actions>\n\n                    </v-card>\n\n                </div>\n                \n                \n\n            </div>\n\n        </v-container>\n            \n    </v-app>\n\n</template>\n\n<script>\nimport { API_GENERATE_TICKET , HEADERS} from '../globalConfig/globalConstConfig'\nimport axios from 'axios'\nexport default {\n    name:\"ReservationDetail\",\n    data(){\n        return{\n            reservationItem:{\n                id:null,\n                clientDetails:{\n                    nom: null,\n                    prenoms:null,\n                    email: null,\n                },\n                designation:null,\n                gareDesignation:null,\n                montantTotalReservation: null,\n                nombrePlace: null,\n                statusActualDesignation: null,\n            },\n\n            ticketGenerated:{\n                data: {\n                    designation: null,\n                }\n            },\n        }\n    },\n\n    methods:{\n\n        async editingBooking(){\n            if (localStorage.getItem(\"reservationBillet\")) {\n                try {\n                    const booking = JSON.parse(localStorage.getItem(\"reservationBillet\"));\n                    this.reservationItem = booking;\n                    console.log(this.reservationItem)\n\n                    localStorage.removeItem(\"reservationBillet\");\n                } catch (error) {\n                    localStorage.removeItem(\"reservationBillet\");\n                }\n            }else{\n                this.$router.replace({path:'/selectionnerReservationBillet'})\n            }\n        },\n\n        async convertToBase64(byte){\n            window.open(\"data:application/pdf;base64,\"+byte, '_blank', 'fullscreen=yes')\n        },\n\n\n        //Generer le billet de voyage\n        async imprimerBillet(designationBillet){\n            this.ticketGenerated.data.designation = designationBillet;\n            await axios.post(API_GENERATE_TICKET, this.ticketGenerated, { headers : HEADERS(this.$store.state.userAuthentified.token) }).then((response) => {  \n                if (designationBillet == null) {\n                    this.$swal.fire('Erreur','Impossible d\\'imprimer ce billet','error');\n                }else{\n                    this.convertToBase64(response.data.item.contentBase64)\n                }              \n            }).catch((e) => {\n                this.errorMsg = e\n            })\n        },\n\n    },\n\n    mounted(){\n        this.editingBooking();\n    }\n}\n</script>\n\n<style scoped>\n    #page{\n        margin-top: 50px;\n    }\n</style>"],"mappings":"AA2IA,SAAAA,mBAAA,EAAAC,OAAA;AACA,OAAAC,KAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACA;MACAC,eAAA;QACAC,EAAA;QACAC,aAAA;UACAC,GAAA;UACAC,OAAA;UACAC,KAAA;QACA;QACAC,WAAA;QACAC,eAAA;QACAC,uBAAA;QACAC,WAAA;QACAC,uBAAA;MACA;MAEAC,eAAA;QACAZ,IAAA;UACAO,WAAA;QACA;MACA;IACA;EACA;EAEAM,OAAA;IAEA,MAAAC,eAAA;MACA,IAAAC,YAAA,CAAAC,OAAA;QACA;UACA,MAAAC,OAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAJ,YAAA,CAAAC,OAAA;UACA,KAAAf,eAAA,GAAAgB,OAAA;UACAG,OAAA,CAAAC,GAAA,MAAApB,eAAA;UAEAc,YAAA,CAAAO,UAAA;QACA,SAAAC,KAAA;UACAR,YAAA,CAAAO,UAAA;QACA;MACA;QACA,KAAAE,OAAA,CAAAC,OAAA;UAAAC,IAAA;QAAA;MACA;IACA;IAEA,MAAAC,gBAAAC,IAAA;MACAC,MAAA,CAAAC,IAAA,kCAAAF,IAAA;IACA;IAGA;IACA,MAAAG,eAAAC,iBAAA;MACA,KAAApB,eAAA,CAAAZ,IAAA,CAAAO,WAAA,GAAAyB,iBAAA;MACA,MAAAlC,KAAA,CAAAmC,IAAA,CAAArC,mBAAA,OAAAgB,eAAA;QAAAsB,OAAA,EAAArC,OAAA,MAAAsC,MAAA,CAAAC,KAAA,CAAAC,gBAAA,CAAAC,KAAA;MAAA,GAAAC,IAAA,CAAAC,QAAA;QACA,IAAAR,iBAAA;UACA,KAAAS,KAAA,CAAAC,IAAA;QACA;UACA,KAAAf,eAAA,CAAAa,QAAA,CAAAxC,IAAA,CAAA2C,IAAA,CAAAC,aAAA;QACA;MACA,GAAAC,KAAA,CAAAC,CAAA;QACA,KAAAC,QAAA,GAAAD,CAAA;MACA;IACA;EAEA;EAEAE,QAAA;IACA,KAAAlC,cAAA;EACA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}